"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1672],{77660:function(e,t,l){l.d(t,{St:function(){return o}});var a,n,r=l(99640);(a=n||(n={})).TOKEN_SEARCH="token_search",a.TOKEN_ACTIVITY_LABEL_CLICK="token_activity_label_click";let o=new class{constructor(){this.emitTokenSearch=e=>{let{searchTerm:t}=e;r.I.emitEvent(n.TOKEN_SEARCH,{search_term:t})},this.emitTokenActivityLabelClick=()=>{r.I.emitEvent(n.TOKEN_ACTIVITY_LABEL_CLICK)}}}},91672:function(e,t,l){l.r(t),l.d(t,{MIN_QUERY_LENGTH:function(){return I},ModalSelectToken:function(){return M},ModalSelectTokenQueryParams:function(){return n},ModalSelectTokenTab:function(){return r}});var a,n,r,o=l(85893),s=l(93469),i=l(67294),d=l(66314),c=l(69484),u=l(47540),m=l(87930),h=l(69308),b=l(27722),x=l(47043),k=l(3188),g=l(48791),p=l(99740),j=l(38826),w=l(31821),v=l(28285),_=l(56168),T=l(77660),N=l(194),E=l(94184),S=l.n(E),f=l(36521),C=l(18067),A=l(36789),L=l(47885),y=l(13915),P=l(85494),K=l(32483);let O=[{id:"name",title:"flooz-web.trade.modal-select-token.table.column.name",titleAlignment:"left"},{id:"price",title:"flooz-web.trade.modal-select-token.table.column.price"},{id:"delta",title:"flooz-web.trade.modal-select-token.table.column.delta"}],F=e=>{let{selectedNetwork:t,onNetworkChange:l,onTokenSelected:a,onEmptyFeedbackActionClick:n,tokens:r,className:s,isLoading:i,isError:d,isEmpty:c,...u}=e,{EMPTY:m,ERROR:h,NO_RESULT:b}=A.FeedbackContext,x={namespace:"flooz-web.trade.modal-select-token.table.feedback",context:d?h:c?m:b,onActionClick:n,actionHref:n?void 0:P.hA,actionLinkTarget:n?void 0:"_blank"},k=d||!i&&null!=r&&0===r.length;return(0,o.jsxs)(L.P,{className:S()("modal-select-token-table",s),gap:"100",children:[null!=l&&!d&&!c&&(0,o.jsx)(L.P,{gap:"50",direction:"row",grow:"1",children:p.si.map(e=>(0,o.jsx)(f.A,{onClick:()=>l(t===e?void 0:e),variant:e===t?"selected":"secondary",icon:p.Eu[e].logo,className:"modal-select-token-table__network"},e))}),(0,o.jsx)(C.w.Table,{...u,className:"modal-select-token-table__table",columns:O,feedback:x,displayFeedback:k,isLoading:i,children:null==r?void 0:r.map(e=>{let{priceDelta:t,usdValue:l}=e,n=t?"".concat(y.z.formatNumber(t,{fixedFractionDigits:2}),"%"):void 0,r=l?"$".concat(y.z.formatNumber(l,{fixedFractionDigits:2,useSuperscriptFormat:!0,useRangeFormat:!0})):void 0;return(0,o.jsxs)(C.w.Row,{onClick:()=>null==a?void 0:a(e),children:[(0,o.jsx)(C.w.Cell,{children:(0,o.jsx)(K.W,{token:e})}),(0,o.jsx)(C.w.Cell,{ellipsis:!0,children:null!=r?r:"-"}),(0,o.jsx)(C.w.Cell,{ellipsis:!0,contextualValue:t,children:null!=n?n:"-"})]},e.address)})})]})};(n||(n={})).NETWORK="network",(a=r||(r={})).ALL_TOKENS="ALL_TOKENS",a.MY_TOKENS="MY_TOKENS";let z=[{id:r.ALL_TOKENS,label:"flooz-web.trade.modal-select-token.tab.".concat(r.ALL_TOKENS),priority:100},{id:r.MY_TOKENS,label:"flooz-web.trade.modal-select-token.tab.".concat(r.MY_TOKENS),priority:200}],I=3,M=e=>{var t,l;let{location:a}=e,{modalHistory:E}=(0,b.N)(),{t:S}=(0,s.$G)(),{selectedAccount:f}=(0,g.Z_)(),C=new URLSearchParams(a.search),A=null!==(t=C.get(n.NETWORK))&&void 0!==t?t:void 0,[L,y]=(0,i.useState)(A),{onTokenSelected:P}=null!==(l=E.location.state)&&void 0!==l?l:{},[K,O]=(0,i.useState)(r.ALL_TOKENS),[M,R]=(0,i.useState)(""),D=(0,w.N)(M,500),Y=_.a.isAddress(D),W=D.trim().length>=I,{list:q,status:H}=(0,v.h)(),Q=(0,i.useMemo)(()=>q.filter(e=>N.S.filterTokenByNetwork(e.network,L)),[q,L]),G=W&&!Y,V={query:D.trim(),network:L},{data:$,isFetching:B,isError:U}=(0,u.P)({queryParameters:V},{enabled:G}),J=W&&Y,{data:Z,isFetching:X,isError:ee}=(0,c.d)({pathParameters:{tokenAddress:D},queryParameters:{network:L}},{enabled:J}),et={status:d.Y.VERIFIED,network:L,limit:20},{data:el,status:ea,isFetchingNextPage:en,hasNextPage:er,fetchNextPage:eo}=(0,u.K)({queryParameters:et}),es=(0,i.useMemo)(()=>null==el?void 0:el.pages.flatMap(e=>{let{result:t}=e;return t}),[null==el?void 0:el.pages]),ei=(0,i.useCallback)(e=>{E.back(),null==P||P(e)},[E,P]),ed=null!=A?void 0:y;return(0,i.useEffect)(()=>{D.length>0&&T.St.emitTokenSearch({searchTerm:D})},[D]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.u.Header,{title:S("flooz-web.trade.modal-select-token.title"),subtitle:A?p.Eu[A].label:void 0}),(0,o.jsx)(h.u.Content,{className:"modal-select-token",children:(0,o.jsxs)(k.m.Container,{className:"modal-select-token__tabs",selectedTabId:K,onTabSelected:e=>O(e),variant:"sheet",alignTabs:"center",tabEntries:z,children:[(0,o.jsx)(k.m.Tab,{id:r.ALL_TOKENS,children:(0,o.jsxs)(m.P,{direction:"column",gap:"100",grow:"1",children:[(0,o.jsx)(x.E.Container,{value:M,onChange:e=>R(null!=e?e:""),placeholder:S("flooz-web.trade.modal-select-token.input-placeholder")}),G||J?(0,o.jsx)(F,{tokens:J&&Z?[Z]:null==$?void 0:$.result,onTokenSelected:ei,selectedNetwork:L,onNetworkChange:ed,isLoading:B||X,isError:U||ee}):(0,o.jsx)(F,{tokens:es,onTokenSelected:ei,selectedNetwork:L,onNetworkChange:ed,onLoadMore:eo,hasNextPage:er,isLoading:"loading"===ea||en,isError:"error"===ea})]})}),(0,o.jsx)(k.m.Tab,{id:r.MY_TOKENS,children:(0,o.jsx)(F,{tokens:Q,selectedNetwork:L,onTokenSelected:ei,onNetworkChange:ed,isEmpty:null==f,onEmptyFeedbackActionClick:()=>E.push(j._.connect),isError:"error"===H})})]})})]})}},77356:function(e,t,l){var a,n;l.d(t,{S:function(){return a}}),(n=a||(a={})).ASC="asc",n.DESC="desc"},47540:function(e,t,l){l.d(t,{K:function(){return d},P:function(){return i}});var a=l(85945),n=l(36492),r=l(59403),o=l(46223),s=l(19069);let i=(e,t)=>{let l=(0,a.NL)();return(0,n.a)(s.a.tokenList(e),()=>o.W4.getTokenList(e),{...t,onSuccess:e=>{var a;e.result.forEach(e=>{let t={tokenAddress:e.address},a={network:e.network},n=s.a.token({queryParameters:a,pathParameters:t});l.setQueryData(n,e)}),null==t||null===(a=t.onSuccess)||void 0===a||a.call(t,e)}})},d=(e,t)=>{let l=(0,a.NL)();return(0,r.N)(s.a.tokenList(e),t=>{let{pageParam:l}=t;return o.W4.getTokenList({...e,...l})},{...t,getNextPageParam:t=>o.W4.getReactQueryPaginatedParams(t,e),onSuccess:e=>{var a;let n=[...e.pages].pop();null==n||n.result.forEach(e=>{let t={tokenAddress:e.address},a={network:e.network},n=s.a.token({queryParameters:a,pathParameters:t});l.setQueryData(n,e)}),null==t||null===(a=t.onSuccess)||void 0===a||a.call(t,e)}})}},36521:function(e,t,l){l.d(t,{A:function(){return a.A}});var a=l(39430)},18067:function(e,t,l){l.d(t,{w:function(){return y}});var a=l(85893),n=l(94184),r=l.n(n),o=l(93469),s=l(67294),i=l(77902),d=l(49105),c=l(47885);let u=(0,s.createContext)(void 0),m=u.Provider,h=()=>{let e=(0,s.useContext)(u);if(null==e)throw Error("dataTableContext: the hook must be used inside a DataTableContextProvider to work properly");return e},b={id:"expanded"},x={id:"actions"},k={id:"rowIndex",titleAlignment:"left"};var g=l(77356),p=l(55183),j=l(10673),w=l(1527);let v=(e,t)=>t&&t.columnId===e?"asc"===t.direction?p.T.SORT_ASC:p.T.SORT_DESC:p.T.SORT_DEFAULT,_=(e,t)=>{let l=null==t?g.S.DESC:t.direction===g.S.DESC?g.S.ASC:void 0;return l?{columnId:e,direction:l}:void 0},T=e=>{let{column:t,className:l,...n}=e,{currentSort:s,updateSorting:i}=h(),{t:d}=(0,o.$G)(),{id:u,title:m,titleAlignment:b="right",minBreakpoint:x,isHidden:k,infoTooltip:g,isSortable:T}=t,N=v(u,s);return(0,a.jsx)("th",{className:r()("data-table-head",{"data-table-head--hidden":k},{["data-table-head--hidden-".concat(x)]:null!=x},l),"data-column":u,...n,children:(0,a.jsx)(c.P,{direction:"row",gap:"0",grow:"1",justifyContent:"right"===b?"end":"start",children:(0,a.jsxs)(c.P,{direction:"row",gap:"25",alignItems:"center",shrink:"1",onClick:T?()=>i(_(u,s)):void 0,role:T?"button":void 0,className:r()("data-table-head__layout",{"data-table-head__layout--sortable":T}),children:[(0,a.jsx)(w.x,{size:"m",color:"muted",ellipsis:!0,children:m?d(m):""}),g&&(0,a.jsx)(j.b,{...g}),T&&(0,a.jsx)(p.J,{icon:N})]})})})};var N=l(55642),E=l(90544),S=l(10070);let f=e=>{let{column:t,link:l,target:n,className:o,children:s,ellipsis:i,contextualValue:d,...c}=e;(0,E.k)(null!=t,"DataTableCell: component must be used inside a DataTableRow component");let{id:u,minBreakpoint:m,isHidden:h,titleAlignment:b="right"}=t,x="number"==typeof d?d:null!=d?parseFloat(d):void 0,k=(0,a.jsx)(w.x,{className:"data-table-cell__text",textAlign:b,component:"span",fontWeight:"regular",ellipsis:i,color:null!=x?x>0?"success":"muted":"inherit",children:s});return(0,a.jsxs)("td",{className:r()("data-table-cell",{"data-table-cell--hidden":h},{["data-table-cell--hidden-".concat(m)]:null!=m},o),"data-column":u,...c,children:[null!=l&&(0,a.jsx)(S.r,{href:l,target:n,children:k}),null==l&&k]})};var C=l(79516);let A=e=>{let{rowIndex:t,className:l,children:n,actions:o,onClick:d,expanded:c,expandedChildren:u,...m}=e,{numbered:g,columns:p,setHasActions:j}=h(),v=s.Children.toArray(n),_=!!g&&null!=t,T=null!=o&&o.length>0,N=T?o[0]:void 0;return(0,s.useEffect)(()=>{T&&j(!0)},[T,j]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:r()("data-table-row",{"data-table-row--clickable":null!=d,"data-table-row--expanded":c},l),onClick:d,...m,children:[_&&(0,a.jsx)(f,{column:k,children:(0,a.jsx)(w.x,{size:"l",color:"muted",children:t+1})}),null==v?void 0:v.map((e,t)=>(0,a.jsx)(s.Fragment,{children:s.cloneElement(e,{column:p[t],...e.props})},t)),T&&o.length>1&&(0,a.jsx)(f,{column:x,children:(0,a.jsx)(C.P.Container,{title:"",useMobileDialog:!1,placement:"bottom-end",children:o.map(e=>(0,a.jsx)(C.P.Item,{...e},e.label))})}),T&&1===o.length&&(0,a.jsx)(f,{column:x,children:(0,a.jsx)(i.z,{variant:"text",size:"m",icon:null==N?void 0:N.icon,onClick:null==N?void 0:N.onClick})})]}),u&&(0,a.jsxs)("tr",{className:r()("data-table-row",{"data-table-row--collapsed":!c}),"data-testid":"data-table-row__expandable",children:[_&&(0,a.jsx)(f,{column:k}),(0,a.jsx)(f,{column:b,colSpan:v.length+(T?1:0),children:(0,a.jsx)("div",{className:r()("data-table-row__expanded-content",{"data-table-row__expanded-content--expanded":c}),children:u})})]})]})},L=e=>{let{loadingElements:t=3}=e,{numbered:l,columns:n,hasActions:r}=h(),o=[...Array(t).keys()],i=(0,s.useMemo)(()=>{let e=l?[k,...n]:[...n];return r?e.concat(x):e},[n,l,r]);return(0,a.jsx)(a.Fragment,{children:o.map(e=>(0,a.jsx)(A,{children:i.map(e=>(0,a.jsx)(f,{column:e,children:(0,a.jsx)(N.g,{width:"100%",height:32})},e.id))},e))})},y={Table:e=>{var t;let{numbered:l=!1,columns:n,hasNextPage:u,className:h,maxRows:b=25,onLoadMore:g,currentSort:p,onSort:j,isLoading:w,feedback:v,displayFeedback:_,children:N,...E}=e,{t:S}=(0,o.$G)(),f=s.Children.toArray(N),[C,A]=(0,s.useState)(0),[y,P]=(0,s.useState)(!1),K=(0,s.useMemo)(()=>null!==(t=null==f?void 0:f.slice(0,b*(C+1)))&&void 0!==t?t:[],[f,b,C]),O=null!=N&&f.length>K.length,F=(0,s.useCallback)(e=>null==j?void 0:j(e),[j]),z=(0,s.useMemo)(()=>({numbered:l,columns:n,currentSort:p,updateSorting:F,setHasActions:P,hasActions:y}),[l,n,p,F,P,y]);return(0,a.jsx)(m,{value:z,children:(0,a.jsxs)(c.P,{gap:"200",className:r()("data-table",h),children:[_&&v&&(0,a.jsx)(d.x,{...v}),!_&&(0,a.jsxs)("table",{className:"data-table__table",...E,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[l&&(0,a.jsx)(T,{column:k}),n.map(e=>(0,a.jsx)(T,{column:e},e.id)),y&&(0,a.jsx)(T,{column:x})]})}),(0,a.jsxs)("tbody",{children:[K.map((e,t)=>(0,a.jsx)(s.Fragment,{children:s.cloneElement(e,{rowIndex:t,...e.props})},t)),w&&(0,a.jsx)(L,{})]})]}),(O||u)&&!_&&(0,a.jsx)(i.z,{disabled:w,variant:"text",size:"l",onClick:()=>{O||null==g||g(),A(e=>e+1)},children:S("flooz-web.shared.data-table.load-more")})]})})},Row:A,Cell:f}}}]);